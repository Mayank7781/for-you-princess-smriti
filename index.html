<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Smriti (Mini) üíñ</title>
    <style>
        /* --- FONTS --- */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;800&family=Poppins:wght@300;400;600&display=swap');

        :root {
            --primary: #c9184a; 
            --bg-gradient-1: #fff0f3;
            --bg-gradient-2: #ffe6ea;
            --glass-bg: rgba(255, 255, 255, 0.8); /* Made slightly less transparent for readability */
            --glass-border: rgba(255, 255, 255, 1);
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- BACKGROUND HEARTS --- */
        .hearts-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 0;
        }

        .heart-bg {
            position: absolute;
            bottom: -10vh;
            animation: floatUp linear infinite;
            font-size: 1.5rem;
            color: rgba(255, 133, 162, 0.5);
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        /* --- GLASS CARD --- */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 2px solid var(--glass-border);
            padding: 40px;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(255, 182, 193, 0.4);
            text-align: center;
            width: 90%;
            max-width: 380px; /* Kept nice and compact */
            min-height: 500px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.5s ease;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            margin-bottom: 5px;
            color: var(--primary);
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            color: #888;
            margin-top: 0;
            margin-bottom: 20px;
            font-weight: 400;
        }

        p {
            font-size: 15px;
            color: #590d22;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Fixed Image Size so it doesn't disappear */
        .hero-img {
            width: 200px;
            height: 200px;
            object-fit: contain; /* Ensures image isn't cropped */
            border-radius: 15px;
            margin-bottom: 25px;
            background-color: transparent;
        }

        /* --- BUTTONS --- */
        .btn-group {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .btn-yes {
            background: var(--primary);
            color: white;
            z-index: 10;
        }

        .btn-yes:hover {
            transform: scale(1.05);
            background: #a4163f;
        }

        #btn-no {
            background: white;
            color: #590d22;
            border: 2px solid #ffccd5;
            position: relative; 
        }

        /* --- CANVAS CONFETTI --- */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 99;
            display: none;
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg">
    </audio>

    <div class="hearts-container" id="hearts-container"></div>

    <canvas id="confetti-canvas"></canvas>

    <div class="glass-card" id="mainCard">
        <h1 id="title">Smriti... ‚ù§Ô∏è</h1>
        <h2 id="subtitle">(My Mini)</h2>
        <p id="message">Will you be my Valentine?</p>
        
        <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" 
             alt="Cute Bear" class="hero-img" id="mainImage">

        <div class="btn-group" id="btnGroup">
            <button class="btn-yes" onclick="handleYesClick()">YES, Obviously!</button>
            <button id="btn-no" onmouseover="moveNoButton()" onclick="moveNoButton()" ontouchstart="moveNoButton()">No</button>
        </div>
    </div>

    <script>
        // --- 1. SETUP VARIABLES ---
        const mainCard = document.getElementById('mainCard');
        const title = document.getElementById('title');
        const subtitle = document.getElementById('subtitle');
        const message = document.getElementById('message');
        const mainImage = document.getElementById('mainImage');
        const btnGroup = document.getElementById('btnGroup');
        const noBtn = document.getElementById('btn-no');
        const bgMusic = document.getElementById('bg-music');

        // --- 2. RELIABLE IMAGES (Hardcoded URLs that work) ---
        // Using Giphy Media direct links which are stable
        const imgAsk = "https://media.giphy.com/media/cLS1cfxvGOPVpf9g3y/giphy.gif"; // Bear flowers
        const imgHappy = "https://media.giphy.com/media/T86i6yDyOYz7J6dPhf/giphy.gif"; // Bear Kiss/Happy
        
        // Set initial image
        mainImage.src = imgAsk;

        // --- 3. BACKGROUND HEARTS ---
        function createFloatingHearts() {
            const container = document.getElementById('hearts-container');
            const heart = document.createElement('div');
            heart.classList.add('heart-bg');
            heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíò', 'üå∏', '‚ú®'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 3 + 4 + 's';
            heart.style.fontSize = (Math.random() * 1 + 1) + 'rem';
            container.appendChild(heart);
            setTimeout(() => heart.remove(), 7000);
        }
        setInterval(createFloatingHearts, 400);

        // --- 4. NO BUTTON LOGIC ---
        function moveNoButton() {
            // Play music on first interaction if not playing
            if (bgMusic.paused) { bgMusic.volume = 0.4; bgMusic.play().catch(e=>console.log(e)); }

            const x = Math.random() * (mainCard.clientWidth - noBtn.offsetWidth);
            const y = Math.random() * (mainCard.clientHeight - noBtn.offsetHeight);
            
            // Ensure button stays inside card
            noBtn.style.position = "absolute";
            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        }

        // --- 5. YES BUTTON CLICK ---
        function handleYesClick() {
            // Start Music & Confetti
            if (bgMusic.paused) { bgMusic.volume = 0.4; bgMusic.play().catch(e=>console.log(e)); }
            startConfetti();

            // STEP 1: Change Content to "YAY" (Inside the same card - No blank page)
            title.innerHTML = "Yayyyyy Mini! üíñ";
            subtitle.innerHTML = ""; // Clear subtitle
            message.innerHTML = "I knew my Princess would say yes! üòâ<br>Click below for your letter...";
            mainImage.src = imgHappy;
            
            // Replace Buttons with "Read Letter" Button
            btnGroup.innerHTML = `
                <button class="btn-yes" onclick="showLetter()">üíå Read My Note</button>
            `;
        }

        // --- 6. SHOW LETTER ---
        function showLetter() {
            // We replace the card content entirely with the letter
            // This ensures it stays on screen and looks correct
            mainCard.innerHTML = `
                <h1 style="font-size:24px; color:#c9184a; margin-bottom:15px;">For My Goddess...‚ú®üëë</h1>
                <p style="font-family:'Poppins'; color:#555; font-size:15px; line-height:1.7; text-align:left; padding:0 10px;">
                    So... you clicked YES. <br>
                    Not that I‚Äôm surprised, Mini üòå. 
                    I already knew you were secretly dying to be with me.
                    <br><br>
                    But jokes apart... having you in my life makes everything brighter. 
                    You truly are <b>my Princess</b> and <b>my Goddess</b>, and I promise to treat you like one (even when you're being annoying).
                    <br><br>
                    You chose me today. I‚Äôll keep choosing you every day. üíõ
                </p>
                <h3 style="font-family:'Playfair Display'; color:#c9184a; margin-top:20px; width:100%; text-align:right;">‚Äì Yours, always ‚ù§Ô∏è</h3>
            `;
        }

        // --- 7. CONFETTI ENGINE ---
        function startConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            for(let i=0; i<100; i++) {
                particles.push({
                    x: Math.random()*canvas.width, y: Math.random()*canvas.height - canvas.height,
                    size: Math.random()*8+4, color: '#ff4d6d', speedY: Math.random()*3+2, speedX: Math.random()*2-1
                });
            }
            
            function animate() {
                ctx.clearRect(0,0,canvas.width,canvas.height);
                particles.forEach(p => {
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.size, p.size);
                    p.y += p.speedY;
                    if(p.y > canvas.height) p.y = -10;
                });
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>
